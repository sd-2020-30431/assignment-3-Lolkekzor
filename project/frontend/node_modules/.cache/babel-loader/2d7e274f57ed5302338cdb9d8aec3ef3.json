{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.mix = mix;\n\nvar _utils = require(\"./utils\");\n\nvar _ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) {\n  if (obj && obj.__esModule) {\n    return obj;\n  } else {\n    var newObj = {};\n\n    if (obj != null) {\n      for (var key in obj) {\n        if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key];\n      }\n    }\n\n    newObj.default = obj;\n    return newObj;\n  }\n}\n\nfunction mix(def) {\n  var composed = {\n    init: [],\n    preEmit: [],\n    shouldEmit: []\n  };\n\n  var updated = function mixDef(mixin) {\n    var mixed = {};\n\n    if (mixin.mixins) {\n      mixin.mixins.forEach(function (subMixin) {\n        _.extend(mixed, mixDef(subMixin));\n      });\n    }\n\n    _.extend(mixed, mixin);\n\n    Object.keys(composed).forEach(function (composable) {\n      if (mixin.hasOwnProperty(composable)) {\n        composed[composable].push(mixin[composable]);\n      }\n    });\n    return mixed;\n  }(def);\n\n  if (composed.init.length > 1) {\n    updated.init = function () {\n      var args = arguments;\n      composed.init.forEach(function (init) {\n        init.apply(this, args);\n      }, this);\n    };\n  }\n\n  if (composed.preEmit.length > 1) {\n    updated.preEmit = function () {\n      return composed.preEmit.reduce(function (args, preEmit) {\n        var newValue = preEmit.apply(this, args);\n        return newValue === undefined ? args : [newValue];\n      }.bind(this), arguments);\n    };\n  }\n\n  if (composed.shouldEmit.length > 1) {\n    updated.shouldEmit = function () {\n      var args = arguments;\n      return !composed.shouldEmit.some(function (shouldEmit) {\n        return !shouldEmit.apply(this, args);\n      }, this);\n    };\n  }\n\n  Object.keys(composed).forEach(function (composable) {\n    if (composed[composable].length === 1) {\n      updated[composable] = composed[composable][0];\n    }\n  });\n  return updated;\n}","map":{"version":3,"sources":["/home/tudor/work/sd/project/frontend/node_modules/reflux-core/lib/mixer.js"],"names":["Object","defineProperty","exports","value","mix","_utils","require","_","_interopRequireWildcard","obj","__esModule","newObj","key","prototype","hasOwnProperty","call","default","def","composed","init","preEmit","shouldEmit","updated","mixDef","mixin","mixed","mixins","forEach","subMixin","extend","keys","composable","push","length","args","arguments","apply","reduce","newValue","undefined","bind","some"],"mappings":"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","sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n    value: true\n});\nexports.mix = mix;\n\nvar _utils = require(\"./utils\");\n\nvar _ = _interopRequireWildcard(_utils);\n\nfunction _interopRequireWildcard(obj) { if (obj && obj.__esModule) { return obj; } else { var newObj = {}; if (obj != null) { for (var key in obj) { if (Object.prototype.hasOwnProperty.call(obj, key)) newObj[key] = obj[key]; } } newObj.default = obj; return newObj; } }\n\nfunction mix(def) {\n    var composed = {\n        init: [],\n        preEmit: [],\n        shouldEmit: []\n    };\n\n    var updated = function mixDef(mixin) {\n        var mixed = {};\n        if (mixin.mixins) {\n            mixin.mixins.forEach(function (subMixin) {\n                _.extend(mixed, mixDef(subMixin));\n            });\n        }\n        _.extend(mixed, mixin);\n        Object.keys(composed).forEach(function (composable) {\n            if (mixin.hasOwnProperty(composable)) {\n                composed[composable].push(mixin[composable]);\n            }\n        });\n        return mixed;\n    }(def);\n\n    if (composed.init.length > 1) {\n        updated.init = function () {\n            var args = arguments;\n            composed.init.forEach(function (init) {\n                init.apply(this, args);\n            }, this);\n        };\n    }\n    if (composed.preEmit.length > 1) {\n        updated.preEmit = function () {\n            return composed.preEmit.reduce(function (args, preEmit) {\n                var newValue = preEmit.apply(this, args);\n                return newValue === undefined ? args : [newValue];\n            }.bind(this), arguments);\n        };\n    }\n    if (composed.shouldEmit.length > 1) {\n        updated.shouldEmit = function () {\n            var args = arguments;\n            return !composed.shouldEmit.some(function (shouldEmit) {\n                return !shouldEmit.apply(this, args);\n            }, this);\n        };\n    }\n    Object.keys(composed).forEach(function (composable) {\n        if (composed[composable].length === 1) {\n            updated[composable] = composed[composable][0];\n        }\n    });\n\n    return updated;\n}"]},"metadata":{},"sourceType":"script"}